#!/usr/bin/env ruby

$:.unshift File.join(File.dirname(__FILE__), *%w{ .. lib })

require 'imgur_up'

imgur_up = ImgurUp::ImgurUp.new("~/.imgur-auto-uploader-dev")

imgur_up.prompt_for_configuration if imgur_up.needs_configuration?

exit 0 unless ARGV.length > 0

imgur_up.watch(ARGV)

Signal.trap("INT")  { exit 0 }
Signal.trap("TERM") { exit 0 }

imgur_up.logger.info "Ready."
sleep
